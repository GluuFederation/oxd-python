

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>client module &mdash; oxd-python 3.1.2 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="oxd-python 3.1.2 documentation" href="index.html"/>
        <link rel="next" title="configurer module" href="configurer.html"/>
        <link rel="prev" title="oxd-python Library Documentation" href="index.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> oxd-python
          

          
          </a>

          
            
            
              <div class="version">
                3.1.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">client module</a></li>
<li class="toctree-l1"><a class="reference internal" href="configurer.html">configurer module</a></li>
<li class="toctree-l1"><a class="reference internal" href="exceptions.html">exceptions module</a></li>
<li class="toctree-l1"><a class="reference internal" href="messenger.html">messenger module</a></li>
<li class="toctree-l1"><a class="reference internal" href="utils.html">utils module</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">oxd-python</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>client module</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="module-client">
<span id="client-module"></span><h1>client module<a class="headerlink" href="#module-client" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="client.Client">
<em class="property">class </em><code class="descclassname">client.</code><code class="descname">Client</code><span class="sig-paren">(</span><em>config_location</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/client.html#Client"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.Client" title="Permalink to this definition">¶</a></dt>
<dd><p>Client is the main class that carries out the task of talking with the
oxd server. The oxd commands are provided as class methods that are called
to send the command to the oxd-server or the oxd-https-extension</p>
<dl class="docutils">
<dt>Parameters:</dt>
<dd><dl class="first last docutils">
<dt>config_location (string): The complete path of the location</dt>
<dd>of the config file. Sample config at
(<a class="reference external" href="https://github.com/GluuFederation/oxd-python/blob/master/sample.cfg">https://github.com/GluuFederation/oxd-python/blob/master/sample.cfg</a>)</dd>
</dl>
</dd>
</dl>
<dl class="method">
<dt id="client.Client.get_access_token_by_refresh_token">
<code class="descname">get_access_token_by_refresh_token</code><span class="sig-paren">(</span><em>refresh_token</em>, <em>scope=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/client.html#Client.get_access_token_by_refresh_token"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.Client.get_access_token_by_refresh_token" title="Permalink to this definition">¶</a></dt>
<dd><p>Function that is used to get a new access token using refresh token</p>
<dl class="docutils">
<dt>Parameters:</dt>
<dd><ul class="first last simple">
<li><strong>refresh_token (str):</strong> refresh_token from get_tokens_by_code command</li>
<li><strong>scope (list, optional):</strong> a list of scopes. If not specified should grant access with scope provided in previous request</li>
</ul>
</dd>
<dt>Returns:</dt>
<dd><p class="first"><strong>dict:</strong> the tokens with expiry time.</p>
<p>Example response:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;access_token&quot;</span><span class="p">:</span><span class="s2">&quot;SlAV32hkKG&quot;</span><span class="p">,</span>
    <span class="s2">&quot;expires_in&quot;</span><span class="p">:</span><span class="mi">3600</span><span class="p">,</span>
    <span class="s2">&quot;refresh_token&quot;</span><span class="p">:</span><span class="s2">&quot;aaAV32hkKG1&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="client.Client.get_authorization_url">
<code class="descname">get_authorization_url</code><span class="sig-paren">(</span><em>acr_values=None</em>, <em>prompt=None</em>, <em>scope=None</em>, <em>custom_params=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/client.html#Client.get_authorization_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.Client.get_authorization_url" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to get the authorization url that can be opened in the
browser for the user to provide authorization and authentication</p>
<dl class="docutils">
<dt>Parameters:</dt>
<dd><ul class="first last simple">
<li><strong>acr_values (list, optional):</strong> acr values in the order of priority</li>
<li><strong>prompt (string, optional):</strong> prompt=login is required if you want to force alter current user session (in case user is already logged in from site1 and site2 constructs authorization request and want to force alter current user session)</li>
<li><strong>scope (list, optional):</strong> scopes required, takes the one provided during site registrations by default</li>
<li><strong>custom_params (dict, optional):</strong> Any custom arguments that the client wishes to pass on to the OP can be passed on as extra parameters to the function</li>
</ul>
</dd>
<dt>Returns:</dt>
<dd><strong>string:</strong> The authorization url that the user must access for authentication and authorization</dd>
<dt>Raises:</dt>
<dd><strong>OxdServerError:</strong> If the oxd throws an error for any reason.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="client.Client.get_client_token">
<code class="descname">get_client_token</code><span class="sig-paren">(</span><em>client_id=None</em>, <em>client_secret=None</em>, <em>op_host=None</em>, <em>op_discovery_path=None</em>, <em>scope=None</em>, <em>auto_update=True</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/client.html#Client.get_client_token"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.Client.get_client_token" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to get the client token which can be used for protection in
all future communication. The access token received by this method is
stored in the config file and used as the <cite>protection_access_token</cite>
for all subsequent calls to oxd.</p>
<dl class="docutils">
<dt>Parameters:</dt>
<dd><ul class="first last simple">
<li><strong>client_id (str, optional):</strong> client id from OP or from previous <cite>setup_client</cite> call</li>
<li><strong>client_secret (str, optional):</strong> client secret from the OP or from <cite>setup_client</cite> call</li>
<li><strong>op_host (str, optional):</strong> OP Host URL, default is read from the site configuration file</li>
<li><strong>op_discovery_path (str, optional):</strong> op discovery path provided by OP</li>
<li><strong>scope (list, optional):</strong> scopes of access required, default values are obtained from the config file</li>
<li><strong>auto_update(bool, optional):</strong> automatically get a new access_token when the current one expires. If this is set to False, then the application must call <cite>get_client_token</cite> when the token expires to update the client with a new access token.</li>
</ul>
</dd>
<dt>Returns:</dt>
<dd><p class="first"><strong>dict:</strong> The client token and the refresh token in the form.</p>
<p>Example response</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;access_token&quot;</span><span class="p">:</span><span class="s2">&quot;6F9619FF-8B86-D011-B42D-00CF4FC964FF&quot;</span><span class="p">,</span>
    <span class="s2">&quot;expires_in&quot;</span><span class="p">:</span> <span class="mi">399</span><span class="p">,</span>
    <span class="s2">&quot;refresh_token&quot;</span><span class="p">:</span> <span class="s2">&quot;fr459f&quot;</span><span class="p">,</span>
    <span class="s2">&quot;scope&quot;</span><span class="p">:</span> <span class="s2">&quot;openid&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="client.Client.get_logout_uri">
<code class="descname">get_logout_uri</code><span class="sig-paren">(</span><em>id_token_hint=None</em>, <em>post_logout_redirect_uri=None</em>, <em>state=None</em>, <em>session_state=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/client.html#Client.get_logout_uri"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.Client.get_logout_uri" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to logout the user.</p>
<dl class="docutils">
<dt>Parameters:</dt>
<dd><ul class="first last simple">
<li><strong>id_token_hint (string, optional):</strong> oxd server will use last used ID Token, if not provided</li>
<li><strong>post_logout_redirect_uri (string, optional):</strong> URI to redirect, this uri would override the value given in the site-config</li>
<li><strong>state (string, optional):</strong> site state</li>
<li><strong>session_state (string, optional):</strong> session state</li>
</ul>
</dd>
<dt>Returns:</dt>
<dd><strong>string:</strong> The URI to which the user must be directed in order to
perform the logout</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="client.Client.get_tokens_by_code">
<code class="descname">get_tokens_by_code</code><span class="sig-paren">(</span><em>code</em>, <em>state</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/client.html#Client.get_tokens_by_code"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.Client.get_tokens_by_code" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to get access code for getting the user details from the
OP. It is called after the user authorizes by visiting the auth URL.</p>
<dl class="docutils">
<dt>Parameters:</dt>
<dd><ul class="first last simple">
<li><strong>code (string):</strong> code, parse from the callback URL querystring</li>
<li><strong>state (string):</strong> state value parsed from the callback URL</li>
</ul>
</dd>
<dt>Returns:</dt>
<dd><p class="first"><strong>dict:</strong> The tokens object with the following data structure.</p>
<p>Example response:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;access_token&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;token string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;expires_in&quot;</span><span class="p">:</span> <span class="mi">3600</span><span class="p">,</span>
    <span class="s2">&quot;refresh_token&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;token string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;id_token&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;token string&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;id_token_claims&quot;</span><span class="p">:</span>
    <span class="p">{</span>
        <span class="s2">&quot;iss&quot;</span><span class="p">:</span> <span class="s2">&quot;https://server.example.com&quot;</span><span class="p">,</span>
        <span class="s2">&quot;sub&quot;</span><span class="p">:</span> <span class="s2">&quot;24400320&quot;</span><span class="p">,</span>
        <span class="s2">&quot;aud&quot;</span><span class="p">:</span> <span class="s2">&quot;s6BhdRkqt3&quot;</span><span class="p">,</span>
        <span class="s2">&quot;nonce&quot;</span><span class="p">:</span> <span class="s2">&quot;n-0S6_WzA2Mj&quot;</span><span class="p">,</span>
        <span class="s2">&quot;exp&quot;</span><span class="p">:</span> <span class="mi">1311281970</span><span class="p">,</span>
        <span class="s2">&quot;iat&quot;</span><span class="p">:</span> <span class="mi">1311280970</span><span class="p">,</span>
        <span class="s2">&quot;at_hash&quot;</span><span class="p">:</span> <span class="s2">&quot;MTIzNDU2Nzg5MDEyMzQ1Ng&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>Raises:</dt>
<dd><dl class="first last docutils">
<dt><strong>OxdServerError:</strong> If oxd server throws an error OR if the params code</dt>
<dd>and scopes are of improper data type.</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="client.Client.get_user_info">
<code class="descname">get_user_info</code><span class="sig-paren">(</span><em>access_token</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/client.html#Client.get_user_info"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.Client.get_user_info" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to get the information about the user using the access code
obtained from the OP</p>
<dl class="docutils">
<dt>Note:</dt>
<dd>Refer to the /.well-known/openid-configuration URL of your OP for
the complete list of the claims for different scopes.</dd>
<dt>Parameters:</dt>
<dd><ul class="first last simple">
<li><strong>access_token (string):</strong> access token from the get_tokens_by_code function</li>
</ul>
</dd>
<dt>Returns:</dt>
<dd><p class="first"><strong>dict:</strong> The user data claims that are returned by the OP in format</p>
<p>Example response:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;sub&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;248289761001&quot;</span><span class="p">],</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Jane Doe&quot;</span><span class="p">],</span>
    <span class="s2">&quot;given_name&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Jane&quot;</span><span class="p">],</span>
    <span class="s2">&quot;family_name&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Doe&quot;</span><span class="p">],</span>
    <span class="s2">&quot;preferred_username&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;j.doe&quot;</span><span class="p">],</span>
    <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;janedoe@example.com&quot;</span><span class="p">],</span>
    <span class="s2">&quot;picture&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;http://example.com/janedoe/me.jpg&quot;</span><span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>Raises:</dt>
<dd><dl class="first last docutils">
<dt><strong>OxdServerError:</strong> If the param access_token is empty OR if the oxd</dt>
<dd>Server returns an error.</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="client.Client.introspect_access_token">
<code class="descname">introspect_access_token</code><span class="sig-paren">(</span><em>access_token</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/client.html#Client.introspect_access_token"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.Client.introspect_access_token" title="Permalink to this definition">¶</a></dt>
<dd><p>Gives information about an access token.</p>
<dl class="docutils">
<dt>Parameters:</dt>
<dd><ul class="first last simple">
<li><strong>access_token (str, required):</strong> access_token from get_tokens_by_code or get_client_token function</li>
</ul>
</dd>
<dt>Returns:</dt>
<dd><p class="first"><strong>dict:</strong> The information about the access token.</p>
<p>Example response</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;active&quot;</span><span class="p">:</span><span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;client_id&quot;</span><span class="p">:</span> <span class="s2">&quot;@6F96!19756yCF4F!C964FF&quot;</span><span class="p">,</span>
    <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;scopes&quot;</span><span class="p">:</span> <span class="s2">&quot;openid&quot;</span><span class="p">,</span>
    <span class="s2">&quot;token_type&quot;</span><span class="p">:</span> <span class="s2">&quot;bearer&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sub&quot;</span><span class="p">:</span> <span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;aud&quot;</span><span class="p">:</span> <span class="s2">&quot;@6F96!19756yCF4F!C964FF&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iss&quot;</span><span class="p">:</span> <span class="s2">&quot;https://idp.example.com&quot;</span><span class="p">,</span>
    <span class="s2">&quot;exp&quot;</span><span class="p">:</span> <span class="s2">&quot;1518268876&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iat&quot;</span><span class="p">:</span> <span class="s2">&quot;1518268576&quot;</span><span class="p">,</span>
    <span class="s2">&quot;acr_values&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">&quot;jti&quot;</span><span class="p">:</span> <span class="n">null</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>Raises:</dt>
<dd>OxdServerError if there was an issue with the operation</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="client.Client.introspect_rpt">
<code class="descname">introspect_rpt</code><span class="sig-paren">(</span><em>rpt</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/client.html#Client.introspect_rpt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.Client.introspect_rpt" title="Permalink to this definition">¶</a></dt>
<dd><p>Gives information about an RPT.</p>
<dl class="docutils">
<dt>Parameters:</dt>
<dd><ul class="first last simple">
<li><strong>rpt (str, required):</strong> rpt from uma_rp_get_rpt function</li>
</ul>
</dd>
<dt>Returns:</dt>
<dd><p class="first"><strong>dict:</strong> The information about the RPT.</p>
<p>Example response</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;active&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
    <span class="s2">&quot;exp&quot;</span><span class="p">:</span> <span class="mi">1256953732</span><span class="p">,</span>
    <span class="s2">&quot;iat&quot;</span><span class="p">:</span> <span class="mi">1256912345</span><span class="p">,</span>
    <span class="s2">&quot;nbf&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
    <span class="s2">&quot;permissions&quot;</span><span class="p">:</span> <span class="p">[{</span>
        <span class="s2">&quot;resource_id&quot;</span><span class="p">:</span> <span class="s2">&quot;112210f47de98100&quot;</span><span class="p">,</span>
        <span class="s2">&quot;resource_scopes&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="s2">&quot;view&quot;</span><span class="p">,</span>
            <span class="s2">&quot;http://photoz.example.com/dev/actions/print&quot;</span>
        <span class="p">],</span>
        <span class="s2">&quot;exp&quot;</span><span class="p">:</span> <span class="mi">1256953732</span>
    <span class="p">}],</span>
    <span class="s2">&quot;client_id&quot;</span><span class="p">:</span> <span class="s2">&quot;@6F96!19756yCF4F!C964FF&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sub&quot;</span><span class="p">:</span> <span class="s2">&quot;John Doe&quot;</span><span class="p">,</span>
    <span class="s2">&quot;aud&quot;</span><span class="p">:</span> <span class="s2">&quot;@6F96!19756yCF4F!C964FF&quot;</span><span class="p">,</span>
    <span class="s2">&quot;iss&quot;</span><span class="p">:</span> <span class="s2">&quot;https://idp.example.com&quot;</span><span class="p">,</span>
    <span class="s2">&quot;jti&quot;</span><span class="p">:</span> <span class="n">null</span>                                         
<span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>Raises:</dt>
<dd>OxdServerError if there was an issue with the operation</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="client.Client.register_site">
<code class="descname">register_site</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/client.html#Client.register_site"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.Client.register_site" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to register the site and generate a unique ID for the site</p>
<dl class="docutils">
<dt>Returns:</dt>
<dd><strong>string:</strong> The ID of the site (also called client id) if the registration is successful</dd>
<dt>Raises:</dt>
<dd><strong>OxdServerError:</strong> If the site registration fails.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="client.Client.remove_site">
<code class="descname">remove_site</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/client.html#Client.remove_site"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.Client.remove_site" title="Permalink to this definition">¶</a></dt>
<dd><p>Cleans up the data for the site.</p>
<dl class="docutils">
<dt>Returns:</dt>
<dd>oxd_id if the process was completed without error</dd>
<dt>Raises:</dt>
<dd>OxdServerError if there was an issue with the operation</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="client.Client.setup_client">
<code class="descname">setup_client</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/client.html#Client.setup_client"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.Client.setup_client" title="Permalink to this definition">¶</a></dt>
<dd><p>The command registers the client for communication protection. This
will be used to obtain an access token via the Get Client Token
command. The access token will be passed as a protection_access_token
parameter to other commands.</p>
<dl class="docutils">
<dt>Note:</dt>
<dd>If you are using the oxd-https-extension, you must setup the client</dd>
<dt>Returns:</dt>
<dd><p class="first"><strong>dict:</strong> the client setup information</p>
<p>Example response:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;oxd_id&quot;</span><span class="p">:</span><span class="s2">&quot;6F9619FF-8B86-D011-B42D-00CF4FC964FF&quot;</span><span class="p">,</span>
    <span class="s2">&quot;op_host&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;op host&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;client_id&quot;</span><span class="p">:</span><span class="s2">&quot;&lt;client id&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;client_secret&quot;</span><span class="p">:</span><span class="s2">&quot;&lt;client secret&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;client_registration_access_token&quot;</span><span class="p">:</span><span class="s2">&quot;&lt;Client registration access token&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;client_registration_client_uri&quot;</span><span class="p">:</span><span class="s2">&quot;&lt;URI of client registration&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;client_id_issued_at&quot;</span><span class="p">:</span><span class="s2">&quot;&lt;client_id issued at&gt;&quot;</span><span class="p">,</span>
    <span class="s2">&quot;client_secret_expires_at&quot;</span><span class="p">:</span><span class="s2">&quot;&lt;client_secret expires at&gt;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="client.Client.uma_rp_get_claims_gathering_url">
<code class="descname">uma_rp_get_claims_gathering_url</code><span class="sig-paren">(</span><em>ticket</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/client.html#Client.uma_rp_get_claims_gathering_url"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.Client.uma_rp_get_claims_gathering_url" title="Permalink to this definition">¶</a></dt>
<dd><p>UMA RP function to get the claims gathering URL.</p>
<dl class="docutils">
<dt>Parameters:</dt>
<dd><ul class="first last simple">
<li><strong>ticket (str):</strong> ticket to pass to the auth server. for 90% of the cases, this will be obtained from ‘need_info’ error of get_rpt</li>
</ul>
</dd>
<dt>Returns:</dt>
<dd><strong>string</strong> specifying the claims gathering url</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="client.Client.uma_rp_get_rpt">
<code class="descname">uma_rp_get_rpt</code><span class="sig-paren">(</span><em>ticket</em>, <em>claim_token=None</em>, <em>claim_token_format=None</em>, <em>pct=None</em>, <em>rpt=None</em>, <em>scope=None</em>, <em>state=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/client.html#Client.uma_rp_get_rpt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.Client.uma_rp_get_rpt" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to be used by a UMA Requesting Party to get RPT token.</p>
<dl class="docutils">
<dt>Parameters:</dt>
<dd><ul class="first last simple">
<li><strong>ticket (str, REQUIRED):</strong> ticket</li>
<li><strong>claim_token (str, OPTIONAL):</strong> claim token</li>
<li><strong>claim_token_format (str, OPTIONAL):</strong> claim token format</li>
<li><strong>pct (str, OPTIONAL):</strong> pct</li>
<li><strong>rpt (str, OPTIONAL):</strong> rpt</li>
<li><strong>scope (list, OPTIONAL):</strong> scope</li>
<li><strong>state (str, OPTIONAL):</strong> state that is returned from <cite>uma_rp_get_claims_gathering_url</cite> command</li>
</ul>
</dd>
<dt>Returns:</dt>
<dd><p class="first"><strong>dict:</strong> The response from the OP.</p>
<p>Success response:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;status&quot;</span><span class="p">:</span><span class="s2">&quot;ok&quot;</span><span class="p">,</span>
    <span class="s2">&quot;data&quot;</span><span class="p">:{</span>
        <span class="s2">&quot;access_token&quot;</span><span class="p">:</span><span class="s2">&quot;SSJHBSUSSJHVhjsgvhsgvshgsv&quot;</span><span class="p">,</span>
        <span class="s2">&quot;token_type&quot;</span><span class="p">:</span><span class="s2">&quot;Bearer&quot;</span><span class="p">,</span>
        <span class="s2">&quot;pct&quot;</span><span class="p">:</span><span class="s2">&quot;c2F2ZWRjb25zZW50&quot;</span><span class="p">,</span>
        <span class="s2">&quot;upgraded&quot;</span><span class="p">:</span><span class="n">true</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>NeedInfoError response:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
                        <span class="s2">&quot;error&quot;</span><span class="p">:</span><span class="s2">&quot;need_info&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;ticket&quot;</span><span class="p">:</span><span class="s2">&quot;ZXJyb3JfZGV0YWlscw==&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;required_claims&quot;</span><span class="p">:[</span>
                                <span class="p">{</span>
                                        <span class="s2">&quot;claim_token_format&quot;</span><span class="p">:[</span>
                                                <span class="s2">&quot;http://openid.net/specs/openid-connect-core-1_0.html#IDToken&quot;</span>
                                        <span class="p">],</span>
                                        <span class="s2">&quot;claim_type&quot;</span><span class="p">:</span><span class="s2">&quot;urn:oid:0.9.2342.19200300.100.1.3&quot;</span><span class="p">,</span>
                                        <span class="s2">&quot;friendly_name&quot;</span><span class="p">:</span><span class="s2">&quot;email&quot;</span><span class="p">,</span>
                                        <span class="s2">&quot;issuer&quot;</span><span class="p">:[</span><span class="s2">&quot;https://example.com/idp&quot;</span><span class="p">],</span>
                                        <span class="s2">&quot;name&quot;</span><span class="p">:</span><span class="s2">&quot;email23423453ou453&quot;</span>
                                <span class="p">}</span>
                        <span class="p">],</span>
                        <span class="s2">&quot;redirect_user&quot;</span><span class="p">:</span><span class="s2">&quot;https://as.example.com/rqp_claims?id=2346576421&quot;</span>
                <span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>Raises:</dt>
<dd><strong>OxdServerError:</strong> When oxd-server reports a generic internal_error
<strong>InvalidTicketError:</strong> When the oxd server returns a “invalid_ticket” error</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="client.Client.uma_rs_check_access">
<code class="descname">uma_rs_check_access</code><span class="sig-paren">(</span><em>rpt</em>, <em>path</em>, <em>http_method</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/client.html#Client.uma_rs_check_access"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.Client.uma_rs_check_access" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to be used in a UMA Resource Server to check access.</p>
<dl class="docutils">
<dt>Parameters:</dt>
<dd><ul class="first last simple">
<li><strong>rpt (string):</strong> RPT or blank value if absent (not send by RP)</li>
<li><strong>path (string):</strong> Path of resource (e.g. for <a class="reference external" href="http://rs.com/phones">http://rs.com/phones</a>, /phones should be passed)</li>
<li><strong>http_method (string):</strong> Http method of RP request (GET, POST, PUT, DELETE)</li>
</ul>
</dd>
<dt>Returns:</dt>
<dd><p class="first"><strong>dict:</strong> The access information received in the format below.</p>
<p>If the access is granted:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="s2">&quot;access&quot;</span><span class="p">:</span> <span class="s2">&quot;granted&quot;</span> <span class="p">}</span>
</pre></div>
</div>
<p>If the access is denied with ticket response:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;access&quot;</span><span class="p">:</span> <span class="s2">&quot;denied&quot;</span><span class="p">,</span>
    <span class="s2">&quot;www-authenticate_header&quot;</span><span class="p">:</span> <span class="s2">&quot;UMA realm=&#39;example&#39;,</span>
        <span class="n">as_uri</span><span class="o">=</span><span class="s1">&#39;https://as.example.com&#39;</span><span class="p">,</span>
        <span class="n">error</span><span class="o">=</span><span class="s1">&#39;insufficient_scope&#39;</span><span class="p">,</span>
        <span class="n">ticket</span><span class="o">=</span><span class="s1">&#39;016f84e8-f9b9-11e0-bd6f-0021cc6004de&#39;</span><span class="s2">&quot;,</span>
    <span class="s2">&quot;ticket&quot;</span><span class="p">:</span> <span class="s2">&quot;016f84e8-f9b9-11e0-bd6f-0021cc6004de&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>If the access is denied without ticket response:</p>
<div class="last highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="s2">&quot;access&quot;</span><span class="p">:</span> <span class="s2">&quot;denied&quot;</span> <span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>Raises:</dt>
<dd><dl class="first last docutils">
<dt><code class="docutils literal notranslate"><span class="pre">oxdpython.exceptions.InvalidRequestError</span></code> if the resource is not</dt>
<dd>protected</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="client.Client.uma_rs_protect">
<code class="descname">uma_rs_protect</code><span class="sig-paren">(</span><em>resources</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/client.html#Client.uma_rs_protect"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.Client.uma_rs_protect" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to be used in a UMA Resource Server to protect resources.</p>
<dl class="docutils">
<dt>Parameters:</dt>
<dd><ul class="first last simple">
<li><strong>resources (list):</strong> list of resource to protect. See example at <a class="reference external" href="https://gluu.org/docs/oxd/3.1.2/api/#uma-rs-protect-resources">here</a></li>
</ul>
</dd>
<dt>Returns:</dt>
<dd><strong>bool:</strong> The status of the request.</dd>
</dl>
</dd></dl>

<dl class="method">
<dt id="client.Client.update_site">
<code class="descname">update_site</code><span class="sig-paren">(</span><em>client_secret_expires_at=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/client.html#Client.update_site"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#client.Client.update_site" title="Permalink to this definition">¶</a></dt>
<dd><p>Function to update the site’s information with OpenID Provider.
This should be called after changing the values in the cfg file.</p>
<dl class="docutils">
<dt>Parameters:</dt>
<dd><ul class="first last simple">
<li><strong>client_secret_expires_at (long, OPTIONAL):</strong> milliseconds since 1970, can be used to extends client lifetime</li>
</ul>
</dd>
<dt>Returns:</dt>
<dd><strong>bool:</strong> The status for update. True for success and False for failure</dd>
<dt>Raises:</dt>
<dd><strong>OxdServerError:</strong> When the update fails and oxd server returns error</dd>
</dl>
</dd></dl>

</dd></dl>

</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="configurer.html" class="btn btn-neutral float-right" title="configurer module" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral" title="oxd-python Library Documentation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Gluu.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'3.1.2',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
   

</body>
</html>